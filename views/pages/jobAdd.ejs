<% include ../includes/backend-head.ejs %>
<body style="overflow-x: hidden;background-color: #eee;">
<% include ../includes/backend-header.ejs %>
<div class="main">
    <% include ../includes/backend-sidebar.ejs %>
    <div class="backend-container">
        <div class="row pb-10" style="margin-right: 0;margin-left: 0">
            <h2 class="w100 tc"><%= job && job._id ? "å²—ä½æ›´æ–°" : "å²—ä½æ·»åŠ " %></h2>
        </div>
        <hr class="layui-bg-blue pt-5">
        <div class="backend-content" style="background-color: #fff">
            <div class="layui-form" style="padding: 0 15px">
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <input type="hidden" value="<%= job && job._id %>" class="layui-input"
                               id="job_id">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" for="job_jobname">å²—ä½åç§°</label>
                    <div class="layui-input-block">
                        <input type="text" value="<%= job && job.jobname %>"
                               placeholder="è¯·è¾“å…¥å²—ä½åç§°"
                               autocomplete="on" class="layui-input" id="job_jobname">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="job_requirement">å²—ä½è¦æ±‚</label>
                    <div class="layui-input-block">
                        <textarea placeholder="è¯·è¾“å…¥å²—ä½è¦æ±‚" class="layui-textarea"
                                  id="job_requirement"><%= job && job.requirement %></textarea>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="job_duty">å²—ä½èŒè´£</label>
                    <div class="layui-input-block">
                        <textarea placeholder="è¯·è¾“å…¥å²—ä½èŒè´£" class="layui-textarea"
                                  id="job_duty"><%= job && job.duty %></textarea>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="job_address">å²—ä½åœ°ç‚¹</label>
                    <div class="layui-input-block">
                        <input type="text" value="<%= job && job.address %>"
                               placeholder="è¯·è¾“å…¥å²—ä½åœ°ç‚¹"
                               autocomplete="on" class="layui-input" id="job_address">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="job_applyWay">æŠ•é€’æ–¹å¼</label>
                    <div class="layui-input-block">
                        <input type="text" value="<%= job && job.applyWay %>"
                               placeholder="è¯·è¾“å…¥å²—ä½æŠ•é€’æ–¹å¼"
                               autocomplete="on" class="layui-input" id="job_applyWay">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="job_note">å²—ä½å¤‡æ³¨</label>
                    <div class="layui-input-block">
                        <textarea placeholder="è¯·è¾“å…¥å²—ä½å¤‡æ³¨" class="layui-textarea"
                                  id="job_note"><%= job && job.note %></textarea>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="job_beizhu">å¡«å†™è¯´æ˜</label>
                    <div class="layui-input-block">
                        <textarea id="job_beizhu" style="cursor: not-allowed;color:red"
                                  disabled="disabled" class="layui-textarea">å²—ä½è¦æ±‚ã€å²—ä½èŒè´£ã€å²—ä½å¤‡æ³¨å¦‚æœæœ‰å¤šé¡¹å†…å®¹ï¼Œå¯é‡‡ç”¨"||"åˆ†éš”ï¼Œå¦‚ï¼šå†…å®¹1||å†…å®¹2||å†…å®¹3ï¼Œ"||"ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå…¶ä»–åœ°æ–¹åˆ‡ä¸å¯å‡ºç°ï¼ï¼ï¼</textarea>
                    </div>
                </div>


                <div class="layui-form-item mt-30 pb-30">
                    <div class="layui-input-block">
                        <button class="layui-btn" type="button" id="save_job">ä¿å­˜</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
	$(document).ready(function () {
		layer.config({
			title: 'æç¤º'
		})

		$("#save_job").bind('click', function () {
			var job_id = $('#job_id').val();
			var job_jobname = $('#job_jobname').val();
			var job_requirement = $('#job_requirement').val();
			var job_duty = $('#job_duty').val();
			var job_address = $('#job_address').val();
			var job_note = $('#job_note').val();
			var job_applyWay = $('#job_applyWay').val();
			if (!(job_jobname.trim() && job_requirement.trim() && job_applyWay.trim())) {
				layer.msg("å²—ä½ä¿¡æ¯ä¸èƒ½ä¸ºç©ºå“¦ğŸ˜¯!");
				return;
			}

			$.ajax({
				type: 'POST',
				url: '/admin/job/save',
				data: {
					jobId: job_id,
					jobname: job_jobname,
					requirement: job_requirement,
					duty: job_duty,
					address: job_address,
					note: job_note,
					applyWay: job_applyWay
				}
			}).done(function (res) {
				if (res.success === 1) {
					layer.msg("å²—ä½ä¿¡æ¯ä¿å­˜æˆåŠŸ!")
					location.replace('/admin/jobList')
				}
			})
		})
	})
</script>
</body>