extends ../layout
block content
	.container
		.row
			form.form-horizontal(method="post", action="/tsmsjtu/message/save", enctype="multipart/form-data")
				if message._id
					input(type="hidden", name="message[_id]", value="#{message._id}")
				.form-group
					label.col-md-2.control-label 系统通知标题
						strong(style="color:red;font-size:15px") &nbsp;*
					.col-md-10
						input.form-control(placeholder="请填写通知标题, 必填", name="message[header]", value=message.header)
				.form-group
					label.col-md-2.control-label 系统通知内容
						strong(style="color:red;font-size:15px") &nbsp;*
					.col-md-10
						textarea#message-input.form-control.message-input-area(rows=1, cols=20, placeholder="请填写通知消息", name="message[content]") #{message.content}
				.form-group
					label.col-md-2.control-label 上传文件
						strong(style="color:red;font-size:15px") &nbsp;*
					.col-md-10(style="color: red")
						a.upload-file(href="javascript:;") 点击选择并上传文件
							span.upload-message.pull-right #{message.attachFile}
							input#uploadExcel.form-control(type="file", name="uploadExcel")
				.form-group
					.col-sm-2.col-sm-offset-2
						button.btn.btn-success(type="submit", style="padding-left:25px; padding-right: 25px") 保存
					.col-sm-2.col-sm-offset-6
						a.pull-right(href="/")
							button.btn.btn-primary(type="button") 返回首页
	// 上传文件样式修改
	script.
		$('.upload-file').on("change", "input[type='file']", function () {
			let filePath = $(this).val();
			$('.upload-message').html('您上传的文件名:  ' + filePath);
		})

		$('.message-input-area').bind('input', function () {
			let messageInputArea = document.getElementById('message-input');
			messageInputArea.style.height = messageInputArea.scrollHeight + 'px';
		})

		$.each($("textarea"), function (i, n) {
			$(n).css("height", n.scrollHeight + "px");
		})