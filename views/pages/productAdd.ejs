<% include ../includes/backend-head.ejs %>
<body style="overflow-x: hidden;background-color: #eee;">
<% include ../includes/backend-header.ejs %>
<div class="main">
    <% include ../includes/backend-sidebar.ejs %>
    <div class="backend-container">
        <div class="row pb-10" style="margin-right: 0;margin-left: 0">
            <h2 class="w100 tc"><%= product && product._id ? "äº§å“æ›´æ–°" : "äº§å“æ·»åŠ " %></h2>
        </div>
        <hr class="layui-bg-blue pt-5">
        <div class="backend-content" style="background-color: #fff">
            <div class="layui-form" style="padding: 0 15px">
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <input type="hidden" value="<%= product && product._id %>" class="layui-input"
                               id="product_id">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" for="product_name">äº§å“åç§°</label>
                    <div class="layui-input-block">
                        <input type="text" value="<%= product && product.name %>"
                               placeholder="è¯·è¾“å…¥äº§å“åç§°"
                               autocomplete="on" class="layui-input" id="product_name">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="product_desc">äº§å“æè¿°</label>
                    <div class="layui-input-block">
                        <input type="text" value="<%= product && product.desc %>"
                               placeholder="è¯·è¾“å…¥äº§å“æè¿°"
                               autocomplete="on" class="layui-input" id="product_desc">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="product_icon">äº§å“å›¾æ ‡</label>
                    <div class="layui-input-block">
                        <input type="text" value="<%= product && product.icon %>"
                               placeholder="è¯·è¾“å…¥äº§å“å›¾æ ‡åœ°å€"
                               autocomplete="on" class="layui-input" id="product_icon">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="product_imgUrl">äº§å“å›¾ç‰‡</label>
                    <div class="layui-input-block">
                        <input type="text" value="<%= product && product.imgUrl %>"
                               placeholder="è¯·è¾“å…¥äº§å“å°é¢å›¾ç‰‡åœ°å€"
                               autocomplete="on" class="layui-input" id="product_imgUrl">
                    </div>
                </div>

                <!--å¹³å°æ¦‚è¿°-->
                <div class="layui-form-item">
                    <label class="layui-form-label" for="product_summary">å¹³å°æ¦‚è¿°</label>
                    <div class="layui-input-block">
                        <textarea id="product_summary" placeholder="è¯·è¾“å…¥å¹³å°æ¦‚è¿°" class="layui-textarea"><%= product && product.summary %></textarea>
                    </div>
                </div>

                <!--å¹³å°ç‰¹å¾-->
                <div class="layui-form-item">
                    <label class="layui-form-label" for="product_character">å¹³å°æ„æˆ</label>
                    <div class="layui-input-block">
                        <textarea id="product_character" placeholder="è¯·è¾“å…¥å¹³å°æ„æˆ" class="layui-textarea"><%= product && product.character %></textarea>
                    </div>
                </div>

                <!--å¹³å°ä¼˜åŠ¿-->
                <div class="layui-form-item">
                    <label class="layui-form-label" for="product_advantage">å¹³å°ä¼˜åŠ¿</label>
                    <div class="layui-input-block">
                        <textarea id="product_advantage" placeholder="è¯·è¾“å…¥å¹³å°ä¼˜åŠ¿" class="layui-textarea"><%= product && product.advantage %></textarea>
                    </div>
                </div>

                <!--å¹³å°åŸ¹è®­-->
                <div class="layui-form-item">
                    <label class="layui-form-label" for="product_training">å¹³å°åŸ¹è®­</label>
                    <div class="layui-input-block">
                        <textarea id="product_training" placeholder="è¯·è¾“å…¥å¹³å°åŸ¹è®­" class="layui-textarea"><%= product && product.training %></textarea>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="introduction">å¡«å†™è¯´æ˜</label>
                    <div class="layui-input-block">
                        <input id="introduction" style="cursor: not-allowed;color:red" disabled="disabled"
                               value="å¹³å°æ¦‚è¿°ã€æ„æˆã€ä¼˜åŠ¿ã€åŸ¹è®­åˆ†ä¸¤çº§å¡«å†™,æ¨¡æ¿å¦‚:æ ‡é¢˜1=å†…å®¹1||å†…å®¹2||å†…å®¹3&&æ ‡é¢˜2=å†…å®¹1||å†…å®¹2||å†…å®¹3||å†…å®¹4;å¦‚æœæ²¡æœ‰æ ‡é¢˜,åˆ™æ¨¡æ¿å¦‚ï¼šå†…å®¹1||å†…å®¹2||å†…å®¹3;å¦‚æœå†…å®¹ä¸ºå›¾ç‰‡ï¼Œåˆ™ç›´æ¥å¡«å†™å›¾ç‰‡åœ°å€"
                               class="layui-input">
                    </div>
                </div>

                <div class="layui-form-item mt-30 pb-30">
                    <div class="layui-input-block">
                        <button class="layui-btn" type="button" id="save_product">ä¿å­˜</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
	$(document).ready(function () {
		layer.config({
			title: 'æç¤º'
		})

		$("#save_product").bind('click', function () {
			var product_id = $('#product_id').val();
			var product_desc = $("#product_desc").val();
			var product_name = $('#product_name').val();
			var product_icon = $("#product_icon").val();
			var product_imgUrl = $("#product_imgUrl").val();
			var product_summary = $("#product_summary").val();
			var product_character = $("#product_character").val();
			var product_advantage = $("#product_advantage").val();
			var product_training = $("#product_training").val();
			if (!(product_desc.trim() && product_name.trim() && product_icon.trim() && product_imgUrl.trim())) {
				layer.msg("äº§å“åŸºæœ¬ä¿¡æ¯ä¸èƒ½ä¸ºç©ºå“¦ğŸ˜¯!");
				return;
			}

			if (!(product_summary.trim() && product_character.trim() && product_advantage.trim())) {
				layer.msg("äº§å“ä¿¡æ¯ä¸èƒ½ä¸ºç©ºå“¦ğŸ˜¯!");
				return;
			}

			$.ajax({
				type: 'POST',
				url: '/admin/product/save',
				data: {
					productId: product_id,
					name: product_name,
					desc: product_desc,
					imgUrl: product_imgUrl,
					icon: product_icon,
					summary: product_summary,
					character: product_character,
					advantage: product_advantage,
					training: product_training,
				}
			}).done(function (res) {
				if (res.success === 1) {
					layer.msg("äº§å“ä¿¡æ¯ä¿å­˜æˆåŠŸ!")
					location.replace('/admin/productList')
				}
			})

		})
	})
</script>
</body>